# Редактирование manifest.json (Backend)

## Цель (Value)
- **Для системы:** Обеспечить целостность и консистентность данных о структуре и метаданных феномена, создав единую точку для атомарного обновления `manifest.json`.
- **Для пользователя:** Гарантировать, что все структурные изменения (добавление, удаление, перемещение блоков) надежно сохраняются и корректно отображаются.

## Требования (Requirements)
1.  **API для обновления:** Реализовать API-эндпоинт (`PUT /api/manifests/{phenomenon_id}`), который принимает полную новую версию `manifest.json` и атомарно обновляет его.
2.  **Валидация:** Перед сохранением `manifest.json` должна проводиться строгая валидация на соответствие схеме данных. Невалидные манифесты должны отклоняться с информативным сообщением об ошибке.
3.  **Логгирование и версионирование:** Каждое изменение `manifest.json` должно:
    -   Создавать новый коммит в Git-репозитории феномена, чтобы обеспечить историю изменений.
    -   Логироваться в системе аудита для отслеживания действий.
4.  **Интеграция:** API должен быть интегрирован с существующими операциями по редактированию контента, чтобы любое структурное изменение вызывало обновление манифеста.

## Критерии приёмки (Acceptance Criteria)
- API-эндпоинт для обновления `manifest.json` работает корректно, атомарно и безопасно.
- Система валидации эффективно предотвращает сохранение некорректных данных.
- Каждое успешное обновление `manifest.json` отражается в виде коммита в Git.
- Существующие функции редактирования (например, добавление нового блока) корректно вызывают обновление `manifest.json`.
- Написаны тесты, проверяющие логику обновления, валидации и версионирования.

## Ограничения (Constraints)
- Эта задача не включает реализацию UI для прямого редактирования `manifest.json`.
- Оптимизация производительности для очень больших манифестов не входит в скоуп.
