# Генерация и раздача статики через MinIO и Nginx

## Цель (Value)
- **Для системы:** Создать надежный и масштабируемый пайплайн для сборки, хранения и раздачи статического контента, что обеспечивает высокую производительность и доступность для неавторизованных пользователей.
- **Для пользователя:** Обеспечить мгновенную загрузку страниц статей благодаря эффективному кешированию и раздаче статики.

## Требования (Requirements)
1.  **Воркер для сборки:** Реализовать фоновый воркер, который запускается после каждого коммита в Git-репозиторий статьи и выполняет следующие действия:
    -   Собирает `index.html` страницы.
    -   Генерирует `manifest.json`, который содержит структуру статьи, метаданные блоков (включая заголовок и уровень заголовка) и ссылки на файлы с контентом (`.md`).
2.  **Интеграция с MinIO:**
    -   Настроить воркер для загрузки всех сгенерированных артефактов (`index.html`, `manifest.json`, `.md` файлы) в S3-совместимое хранилище MinIO.
    -   Реализовать версионирование артефактов для предотвращения потери данных и возможности отката.
3.  **Конфигурация Nginx:**
    -   Настроить Nginx как обратный прокси для раздачи статических файлов из MinIO.
    -   Реализовать эффективную стратегию кеширования на стороне Nginx для минимизации задержек.
4.  **Стратегия гидратации:** Предусмотреть механизм, который позволит на статически сгенерированных страницах подгружать динамические данные для авторизованных пользователей (например, статус голосования, комментарии).

## Критерии приёмки (Acceptance Criteria)
- После каждого коммита в репозиторий статьи статические артефакты корректно генерируются и загружаются в MinIO.
- `manifest.json` содержит всю необходимую информацию для построения структуры страницы, включая заголовки и уровни блоков.
- Nginx успешно раздает статический контент из MinIO и применяет настроенные правила кеширования.
- Написаны интеграционные тесты, проверяющие весь пайплайн от коммита до доступности страницы через Nginx.
- В документации описан весь процесс, включая сценарии обработки ошибок и восстановления.

## Ограничения (Constraints)
- В рамках этой задачи не реализуется сам фронтенд-код для гидратации, а только предусматривается API и механизм для этого.
- Мониторинг и алертинг для пайплайна выносятся в отдельную задачу.
